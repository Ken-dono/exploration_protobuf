<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>exploration_protobuf_c: Mini-Projet d&#39;Exploration Protobuf avec Communication en C</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">exploration_protobuf_c
   &#160;<span id="projectnumber">1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Mini-Projet d'Exploration Protobuf avec Communication en C </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md_c_README"></a></p><ul>
<li><a href="#description">Description</a></li>
<li><a href="#exploration-et-ressources">Exploration et Ressources</a></li>
<li><a href="#fonctionnalités">Fonctionnalités</a></li>
<li><a href="#installation">Installation</a></li>
<li><a href="#structure-du-projet">Structure du Projet</a></li>
<li><a href="#utilisation">Utilisation</a></li>
<li><a href="#mode-débogage">Mode Débogage</a></li>
<li><a href="#documentation-du-code">Documentation du code</a></li>
</ul>
<h1><a class="anchor" id="autotoc_md1"></a>
Description</h1>
<p>Ce mini-projet démontre l'utilisation de Protocol Buffers (protobuf) pour sérialiser et désérialiser des données structurées, ainsi que l'établissement d'une communication réseau via des sockets TCP en C. Le projet inclut un exemple de définition protobuf et de mise en œuvre côté serveur et client pour l'envoi et la réception de messages sérialisés.</p>
<h1><a class="anchor" id="autotoc_md2"></a>
Exploration et Ressources</h1>
<p>Pour le développement de ce mini-projet, plusieurs ressources concernant les Protocol Buffers (protobuf) en C et les techniques de communication réseau ont été consultées. Les sources principales incluent :</p>
<ul>
<li><b>Protobuf-C GitHub Repository</b> :<ul>
<li><a href="https://github.com/protobuf-c/protobuf-c">GitHub - protobuf-c/protobuf-c</a> : Le dépôt officiel de Protobuf-C, contenant le code source et la documentation.</li>
</ul>
</li>
<li><b>Documentation Officielle Protobuf-C</b> :<ul>
<li><a href="https://protobuf-c.github.io/protobuf-c/">Protobuf-C</a> : Documentation officielle de Protobuf-C, détaillant son utilisation en C.</li>
</ul>
</li>
<li><b>Wikis et Guides Protobuf-C</b> :<ul>
<li><a href="https://github.com/protobuf-c/protobuf-c/wiki">Protobuf-C Wiki</a> : Informations sur les concepts de base et fonctionnalités avancées de Protobuf-C.</li>
<li><a href="https://github.com/protobuf-c/protobuf-c/wiki/Examples">Exemples Protobuf-C</a> : Exemples pratiques montrant l'usage de Protobuf-C pour la sérialisation et la désérialisation.</li>
</ul>
</li>
<li><b>Forum Protobuf-C</b> :<ul>
<li><a href="https://groups.google.com/forum/#!forum/protobuf-c">Google Group - Protobuf-C</a> : Un forum dédié aux discussions sur Protobuf-C, avec des contributions de développeurs et utilisateurs.</li>
</ul>
</li>
</ul>
<p>Ces ressources ont été utilisées pour acquérir des connaissances et résoudre des problèmes techniques spécifiques rencontrés pendant le développement du projet.</p>
<h1><a class="anchor" id="autotoc_md3"></a>
Fonctionnalités</h1>
<ul>
<li>Communication TCP/IP basique entre le client et le serveur.</li>
<li>Utilisation de Protobuf pour la sérialisation et la désérialisation des messages.</li>
<li>Gestion de différents types de messages (par exemple, <code>battery_level</code>, <code>status_explo</code>, <code>position</code>).</li>
<li>Interaction utilisateur pour choisir et envoyer des messages spécifiques.</li>
<li>Gestion des threads pour la lecture et l'écriture des messages.</li>
</ul>
<h1><a class="anchor" id="autotoc_md4"></a>
Installation</h1>
<p>Assurez-vous d'avoir les paquets suivants installés :</p><ul>
<li><code>protobuf-c-compiler</code> : Le compilateur pour Protocol Buffers, nécessaire pour compiler les fichiers <code>.proto</code>.</li>
<li><code>libprotobuf-c-dev</code> : Les bibliothèques de développement pour protobuf en C, fournissant les en-têtes et les bibliothèques nécessaires pour la compilation.</li>
<li><code>pkg-config</code> : Un outil de gestion de la configuration des paquets logiciels, utilisé pour récupérer les drapeaux de compilation et de liaison nécessaires pour les bibliothèques installées sur votre système.</li>
</ul>
<p>Pour installer ces dépendances sous Debian/Ubuntu, utilisez la commande suivante :</p>
<div class="fragment"><div class="line">sudo apt-get install protobuf-c-compiler libprotobuf-c-dev pkg-config</div>
</div><!-- fragment --><p> Pour compiler le projet, utilisez la commande <code>make</code> à la racine du projet.</p>
<h1><a class="anchor" id="autotoc_md5"></a>
Structure du Projet</h1>
<p>Le projet est organisé de la manière suivante :</p>
<ul>
<li><code>com/</code> : Gère la communication entre le serveur et le client.<ul>
<li><code><a class="el" href="com_8c_source.html">com.c</a></code> : Implémente les fonctions de communication.</li>
<li><code><a class="el" href="com_8h.html" title="Interface pour la gestion de la communication entre serveur et client.">com.h</a></code> : Définit les structures et les prototypes pour <code><a class="el" href="com_8c_source.html">com.c</a></code>.</li>
</ul>
</li>
<li><code>connexion/</code> : Gère la connexion réseau.<ul>
<li><code><a class="el" href="connexion_8c_source.html">connexion.c</a></code> : Implémente les fonctions de connexion.</li>
<li><code><a class="el" href="connexion_8h.html" title="Ce fichier contient les déclarations des fonctions pour la gestion des connexions réseau.">connexion.h</a></code> : Définit les structures et les prototypes pour <code><a class="el" href="connexion_8c_source.html">connexion.c</a></code>.</li>
</ul>
</li>
<li><code>protocole/</code> : Gère le codage et le décodage des messages.<ul>
<li><code><a class="el" href="protocole_8c_source.html">protocole.c</a></code> : Implémente les fonctions de codage et de décodage.</li>
<li><code><a class="el" href="protocole_8h.html" title="Fichier d&#39;en-tête pour la gestion du protocole de communication.">protocole.h</a></code> : Définit les structures et les prototypes pour <code><a class="el" href="protocole_8c_source.html">protocole.c</a></code>.</li>
</ul>
</li>
<li><code><a class="el" href="main_8c_source.html">main.c</a></code> : Le point d'entrée du programme.</li>
<li><code>fichier.proto</code> : Définit les structures des messages.</li>
<li><code>Makefile</code> : Script de compilation pour le projet.</li>
<li><code>README.md</code> : Ce fichier, expliquant comment installer, construire et exécuter le projet.</li>
</ul>
<h1><a class="anchor" id="autotoc_md6"></a>
Utilisation</h1>
<p>Lancez le serveur avec la commande suivante :</p>
<div class="fragment"><div class="line">make run</div>
</div><!-- fragment --><p>Observez les packet transmis avec la commande suivante : </p><div class="fragment"><div class="line">sudo tcpdump -i any tcp port 12345 -X</div>
</div><!-- fragment --><p>Simulez un client sur la socket avec la commande suivante : </p><div class="fragment"><div class="line">nc localhost 12345</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md7"></a>
Explication de l'exécution</h1>
<p>Le programme principal <code>main</code> s'exécute selon les étapes suivantes :</p>
<ol type="1">
<li><b>Initialisation de la Communication</b> :<ul>
<li>Le système initialise la communication en appelant <code><a class="el" href="com_8h.html#a28f1bc7c9e3088ea5b6bb8d1b45131d7" title="Initialise la file de messages pour l&#39;écriture.">com_init()</a></code>, qui configure la file de messages et lance les threads de lecture et d'écriture.</li>
</ul>
</li>
<li><b>Établissement de la Connexion</b> :<ul>
<li>Le serveur, à travers <code><a class="el" href="connexion_8h.html#a7a5a45d5cbebed8b7c6e554c0010f504" title="Initialisation du serveur pour écouter sur un port spécifié.">connexion_init()</a></code>, configure et écoute sur un port TCP/IP spécifié. Il attend ensuite une connexion entrante avec <code><a class="el" href="connexion_8h.html#a642d742fdc5cfea97e361615b1ced5b0" title="Accepte une connexion entrante sur la socket du serveur.">connexion_accept()</a></code>.</li>
</ul>
</li>
<li><b>Interaction avec l'Utilisateur</b> :<ul>
<li>Une fois la connexion établie, l'utilisateur est invité à entrer des commandes pour envoyer différents types de messages (par exemple, <code>04</code> pour <code>battery_level</code>).</li>
</ul>
</li>
<li><b>Création et Envoi de Messages Protobuf</b> :<ul>
<li>Selon l'entrée de l'utilisateur, un message spécifique est créé et sérialisé en utilisant Protocol Buffers. La sérialisation convertit la structure du message en un format adapté à la transmission réseau.</li>
</ul>
</li>
<li><b>Transmission des Messages</b> :<ul>
<li>Les messages sérialisés sont envoyés sur le réseau via <code><a class="el" href="com_8h.html#abb7a981ab57e6aeb203c4258ef611391" title="Envoie un message à travers la file de messages.">com_send_message()</a></code>, qui place le message dans la file de messages. Le thread d'écriture lit ensuite ce message, le transmet via la socket TCP au client connecté.</li>
</ul>
</li>
<li><b>Réception et Traitement des Réponses</b> :<ul>
<li>En parallèle, le thread de lecture surveille les données entrantes sur la socket. Lorsqu'un message est reçu, il est désérialisé en une structure de message Protobuf pour traitement.</li>
</ul>
</li>
<li><b>Fermeture de la Communication</b> :<ul>
<li>L'utilisateur peut arrêter le programme en entrant <code>q</code>. Cela déclenche <code><a class="el" href="com_8h.html#a4c85314f6f20bc88831f310ebc10a30d" title="Arrête le système de communication.">com_stop()</a></code>, qui envoie un message d'arrêt aux threads et ferme la connexion réseau proprement.</li>
</ul>
</li>
<li><b>Nettoyage des Ressources</b> :<ul>
<li>Avant de se terminer, le programme effectue un nettoyage, en libérant toutes les ressources allouées, y compris les buffers de sérialisation et les file de messages, assurant ainsi une fermeture sans fuite de mémoire.</li>
</ul>
</li>
</ol>
<p>À chaque étape, le programme intègre une gestion d'erreur robuste pour assurer un fonctionnement stable et sécurisé, même en cas de problèmes de réseau, de sérialisation ou d'allocation de mémoire. En cas d'erreur, des messages descriptifs sont affichés pour faciliter le débogage et la résolution des problèmes.</p>
<h1><a class="anchor" id="autotoc_md8"></a>
Mode Débogage</h1>
<p>Le projet supporte un mode de débogage. Lors de la compilation, un executable en mode DEBUG est créé en parallèle de l'executable de la release normale. Le lancement de la version DEBUG est réalisé via la commande :</p>
<div class="fragment"><div class="line">make debug</div>
</div><!-- fragment --><p> En mode débogage, des informations supplémentaires sont imprimées sur la console pour aider au débogage du programme. En mode normal (release), ces informations sont omises pour une exécution plus propre.</p>
<h1><a class="anchor" id="autotoc_md9"></a>
Documentation du code</h1>
<p>La documentation complète du code, générée avec Doxygen, est disponible <a href="https://ken-dono.github.io/exploration_protobuf/index.html">ici</a>. </p>
</div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
